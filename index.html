<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    
    <!-- Web App Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Spanish Verbs">
    <link rel="apple-touch-icon" href="https://i.imgur.com/gT7h4v4.png">

    <title>Spanish Verb Flashcards</title>
    
    <!-- Scripts -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Styles -->
    <style>
        .perspective-1000 { perspective: 1000px; }
        .transform-style-preserve-3d { transform-style: preserve-3d; }
        .backface-hidden { backface-visibility: hidden; }
        .rotate-y-180 { transform: rotateY(180deg); }
        /* Prevents flashing highlight on tap in mobile browsers */
        * { -webkit-tap-highlight-color: transparent; }
    </style>
</head>
<body class="overscroll-none">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- Icon Components (unchanged) ---
        const BookIcon = () => (
            <svg className="w-6 h-6 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
            </svg>
        );
        const ChevronLeftIcon = () => (
            <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 19l-7-7 7-7" />
            </svg>
        );
        const ChevronRightIcon = () => (
            <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
            </svg>
        );
        const RefreshIcon = () => (
            <svg className="w-4 h-4 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
            </svg>
        );
        const ShuffleIcon = () => (
            <svg className="w-4 h-4 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
            </svg>
        );

        // --- Main App Component ---
        const SpanishVerbFlashcards = () => {
            // **FIX**: Defined the 10 base sets of verbs first.
            const baseVerbSets = {
                "Essential Basics": [
                    { spanish: "ser", english: "to be (permanent)", conjugations: ["soy", "eres", "es", "somos", "sois", "son"] },
                    { spanish: "estar", english: "to be (temporary)", conjugations: ["estoy", "estás", "está", "estamos", "estáis", "están"] },
                    { spanish: "tener", english: "to have", conjugations: ["tengo", "Tienes", "tiene", "tenemos", "tenéis", "tienen"] },
                    { spanish: "hacer", english: "to do/make", conjugations: ["hago", "haces", "hace", "hacemos", "hacéis", "hacen"] },
                    { spanish: "ir", english: "to go", conjugations: ["voy", "vas", "va", "vamos", "vais", "van"] },
                    { spanish: "venir", english: "to come", conjugations: ["vengo", "vienes", "viene", "venimos", "venís", "vienen"] },
                    { spanish: "ver", english: "to see", conjugations: ["veo", "ves", "ve", "vemos", "veis", "ven"] },
                    { spanish: "dar", english: "to give", conjugations: ["doy", "das", "da", "damos", "dais", "dan"] },
                    { spanish: "saber", english: "to know (facts)", conjugations: ["sé", "sabes", "sabe", "sabemos", "sabéis", "saben"] },
                    { spanish: "querer", english: "to want/love", conjugations: ["quiero", "quieres", "quiere", "queremos", "queréis", "quieren"] }
                ],
                "Common Actions": [
                    { spanish: "poder", english: "to be able", conjugations: ["puedo", "puedes", "puede", "podemos", "podéis", "pueden"] },
                    { spanish: "decir", english: "to say/tell", conjugations: ["digo", "dices", "dice", "decimos", "decís", "dicen"] },
                    { spanish: "hablar", english: "to speak", conjugations: ["hablo", "hablas", "habla", "hablamos", "habláis", "hablan"] },
                    { spanish: "comer", english: "to eat", conjugations: ["como", "comes", "come", "comemos", "coméis", "comen"] },
                    { spanish: "vivir", english: "to live", conjugations: ["vivo", "vives", "vive", "vivimos", "vivís", "viven"] },
                    { spanish: "trabajar", english: "to work", conjugations: ["trabajo", "trabajas", "trabaja", "trabajamos", "trabajáis", "trabajan"] },
                    { spanish: "escribir", english: "to write", conjugations: ["escribo", "escribes", "escribe", "escribimos", "escribís", "escriben"] },
                    { spanish: "leer", english: "to read", conjugations: ["leo", "lees", "lee", "leemos", "leéis", "leen"] },
                    { spanish: "escuchar", english: "to listen", conjugations: ["escucho", "escuchas", "escucha", "escuchamos", "escucháis", "escuchan"] },
                    { spanish: "comprar", english: "to buy", conjugations: ["compro", "compras", "compra", "compramos", "compráis", "compran"] }
                ],
                "Movement & Location": [
                    { spanish: "poner", english: "to put", conjugations: ["pongo", "pones", "pone", "ponemos", "ponéis", "ponen"] },
                    { spanish: "salir", english: "to leave/go out", conjugations: ["salgo", "sales", "sale", "salimos", "salís", "salen"] },
                    { spanish: "llegar", english: "to arrive", conjugations: ["llego", "llegas", "llega", "llegamos", "llegáis", "llegan"] },
                    { spanish: "pasar", english: "to pass/happen", conjugations: ["paso", "pasas", "pasa", "pasamos", "pasáis", "pasan"] },
                    { spanish: "encontrar", english: "to find", conjugations: ["encuentro", "encuentras", "encuentra", "encontramos", "encontráis", "encuentran"] },
                    { spanish: "buscar", english: "to look for", conjugations: ["busco", "buscas", "busca", "buscamos", "buscáis", "buscan"] },
                    { spanish: "entrar", english: "to enter", conjugations: ["entro", "entras", "entra", "entramos", "entráis", "entran"] },
                    { spanish: "quedar", english: "to stay/remain", conjugations: ["quedo", "quedas", "queda", "quedamos", "quedáis", "quedan"] },
                    { spanish: "volver", english: "to return", conjugations: ["vuelvo", "vuelves", "vuelve", "volvemos", "volvéis", "vuelven"] },
                    { spanish: "viajar", english: "to travel", conjugations: ["viajo", "viajas", "viaja", "viajamos", "viajáis", "viajan"] }
                ],
                "Thinking & Knowing": [
                    { spanish: "pensar", english: "to think", conjugations: ["pienso", "piensas", "piensa", "pensamos", "pensáis", "piensan"] },
                    { spanish: "creer", english: "to believe", conjugations: ["creo", "crees", "cree", "creemos", "creéis", "creen"] },
                    { spanish: "entender", english: "to understand", conjugations: ["entiendo", "entiendes", "entiende", "entendemos", "entendéis", "entienden"] },
                    { spanish: "conocer", english: "to know (people/places)", conjugations: ["conozco", "conoces", "conoce", "conocemos", "conocéis", "conocen"] },
                    { spanish: "recordar", english: "to remember", conjugations: ["recuerdo", "recuerdas", "recuerda", "recordamos", "recordáis", "recuerdan"] },
                    { spanish: "olvidar", english: "to forget", conjugations: ["olvido", "olvidas", "olvida", "olvidamos", "olvidáis", "olvidan"] },
                    { spanish: "aprender", english: "to learn", conjugations: ["aprendo", "aprendes", "aprende", "aprendemos", "aprendéis", "aprenden"] },
                    { spanish: "decidir", english: "to decide", conjugations: ["decido", "decides", "decide", "decidimos", "decidís", "deciden"] },
                    { spanish: "parecer", english: "to seem", conjugations: ["parezco", "pareces", "parece", "parecemos", "parecéis", "parecen"] },
                    { spanish: "sentir", english: "to feel", conjugations: ["siento", "sientes", "siente", "sentimos", "sentís", "sienten"] }
                ],
                "Daily Routines": [
                    { spanish: "despertarse", english: "to wake up", conjugations: ["me despierto", "te despiertas", "se despierta", "nos despertamos", "os despertáis", "se despiertan"] },
                    { spanish: "levantarse", english: "to get up", conjugations: ["me levanto", "te levantas", "se levanta", "nos levantamos", "os levantáis", "se levantan"] },
                    { spanish: "ducharse", english: "to shower", conjugations: ["me ducho", "te duchas", "se ducha", "nos duchamos", "os ducháis", "se duchan"] },
                    { spanish: "vestirse", english: "to get dressed", conjugations: ["me visto", "te vistes", "se viste", "nos vestimos", "os vestís", "se visten"] },
                    { spanish: "desayunar", english: "to have breakfast", conjugations: ["desayuno", "desayunas", "desayuna", "desayunamos", "desayunáis", "desayunan"] },
                    { spanish: "almorzar", english: "to have lunch", conjugations: ["almuerzo", "almuerzas", "almuerza", "almorzamos", "almorzáis", "almuerzan"] },
                    { spanish: "cenar", english: "to have dinner", conjugations: ["ceno", "cenas", "cena", "cenamos", "cenáis", "cenan"] },
                    { spanish: "acostarse", english: "to go to bed", conjugations: ["me acuesto", "te acuestas", "se acuesta", "nos acostamos", "os acostáis", "se acuestan"] },
                    { spanish: "dormir", english: "to sleep", conjugations: ["duermo", "duermes", "duerme", "dormimos", "dormís", "duermen"] },
                    { spanish: "limpiar", english: "to clean", conjugations: ["limpio", "limpias", "limpia", "limpiamos", "limpiáis", "limpian"] }
                ],
                "Social & Communication": [
                    { spanish: "ayudar", english: "to help", conjugations: ["ayudo", "ayudas", "ayuda", "ayudamos", "ayudáis", "ayudan"] },
                    { spanish: "llamar", english: "to call", conjugations: ["llamo", "llamas", "llama", "llamamos", "llamáis", "llaman"] },
                    { spanish: "preguntar", english: "to ask", conjugations: ["pregunto", "preguntas", "pregunta", "preguntamos", "preguntáis", "preguntan"] },
                    { spanish: "responder", english: "to answer", conjugations: ["respondo", "respondes", "responde", "respondemos", "respondéis", "responden"] },
                    { spanish: "mostrar", english: "to show", conjugations: ["muestro", "muestras", "muestra", "mostramos", "mostráis", "muestran"] },
                    { spanish: "explicar", english: "to explain", conjugations: ["explico", "explicas", "explica", "explicamos", "explicáis", "explican"] },
                    { spanish: "necesitar", english: "to need", conjugations: ["necesito", "necesitas", "necesita", "necesitamos", "necesitáis", "necesitan"] },
                    { spanish: "usar", english: "to use", conjugations: ["uso", "usas", "usa", "usamos", "usáis", "usan"] },
                    { spanish: "llevar", english: "to wear/carry", conjugations: ["llevo", "llevas", "lleva", "llevamos", "lleváis", "llevan"] },
                    { spanish: "seguir", english: "to follow", conjugations: ["sigo", "sigues", "sigue", "seguimos", "seguís", "siguen"] }
                ],
                "Actions & Activities": [
                    { spanish: "jugar", english: "to play (sport/game)", conjugations: ["juego", "juegas", "juega", "jugamos", "jugáis", "juegan"] },
                    { spanish: "cantar", english: "to sing", conjugations: ["canto", "cantas", "canta", "cantamos", "cantáis", "cantan"] },
                    { spanish: "bailar", english: "to dance", conjugations: ["bailo", "bailas", "baila", "bailamos", "bailáis", "bailan"] },
                    { spanish: "correr", english: "to run", conjugations: ["corro", "corres", "corre", "corremos", "corréis", "corren"] },
                    { spanish: "nadar", english: "to swim", conjugations: ["nado", "nadas", "nada", "nadamos", "nadáis", "nadan"] },
                    { spanish: "cocinar", english: "to cook", conjugations: ["cocino", "cocinas", "cocina", "cocinamos", "cocináis", "cocinan"] },
                    { spanish: "abrir", english: "to open", conjugations: ["abro", "abres", "abre", "abrimos", "abrís", "abren"] },
                    { spanish: "cerrar", english: "to close", conjugations: ["cierro", "cierras", "cierra", "cerramos", "cerráis", "cierran"] },
                    { spanish: "ganar", english: "to win/earn", conjugations: ["gano", "ganas", "gana", "ganamos", "ganáis", "ganan"] },
                    { spanish: "perder", english: "to lose", conjugations: ["pierdo", "pierdes", "pierde", "perdemos", "perdéis", "pierden"] }
                ],
                "Possession & Change": [
                    { spanish: "cambiar", english: "to change", conjugations: ["cambio", "cambias", "cambia", "cambiamos", "cambiáis", "cambian"] },
                    { spanish: "empezar", english: "to begin/start", conjugations: ["empiezo", "empiezas", "empieza", "empezamos", "empezáis", "empiezan"] },
                    { spanish: "terminar", english: "to finish/end", conjugations: ["termino", "terminas", "termina", "terminamos", "termináis", "terminan"] },
                    { spanish: "dejar", english: "to leave/allow", conjugations: ["dejo", "dejas", "deja", "dejamos", "dejáis", "dejan"] },
                    { spanish: "recibir", english: "to receive", conjugations: ["recibo", "recibes", "recibe", "recibimos", "recibís", "reciben"] },
                    { spanish: "pagar", english: "to pay", conjugations: ["pago", "pagas", "paga", "pagamos", "pagáis", "pagan"] },
                    { spanish: "vender", english: "to sell", conjugations: ["vendo", "vendes", "vende", "vendemos", "vendéis", "venden"] },
                    { spanish: "crear", english: "to create", conjugations: ["creo", "creas", "crea", "creamos", "creáis", "crean"] }, // REPLACED 'vivir'
                    { spanish: "morir", english: "to die", conjugations: ["muero", "mueres", "muere", "morimos", "morís", "mueren"] },
                    { spanish: "nacer", english: "to be born", conjugations: ["nazco", "naces", "nace", "nacemos", "nacéis", "nacen"] }
                ],
                 "General Use Verbs 1": [
                    { spanish: "tomar", english: "to take/drink", conjugations: ["tomo", "tomas", "toma", "tomamos", "tomáis", "toman"] },
                    { spanish: "mirar", english: "to look at/watch", conjugations: ["miro", "miras", "mira", "miramos", "miráis", "miran"] },
                    { spanish: "esperar", english: "to wait/hope", conjugations: ["espero", "esperas", "espera", "esperamos", "esperáis", "esperan"] },
                    { spanish: "entregar", english: "to deliver/hand in", conjugations: ["entrego", "entregas", "entrega", "entregamos", "entregáis", "entregan"] },
                    { spanish: "contar", english: "to count/tell", conjugations: ["cuento", "cuentas", "cuenta", "contamos", "contáis", "cuentan"] },
                    { spanish: "servir", english: "to serve", conjugations: ["sirvo", "sirves", "sirve", "servimos", "servís", "sirven"] },
                    { spanish: "pedir", english: "to ask for/order", conjugations: ["pido", "pides", "pide", "pedimos", "pedís", "piden"] },
                    { spanish: "caer", english: "to fall", conjugations: ["caigo", "caes", "cae", "caemos", "caéis", "caen"] },
                    { spanish: "tratar", english: "to try/treat", conjugations: ["trato", "tratas", "trata", "tratamos", "tratáis", "tratan"] },
                    { spanish: "gastar", english: "to spend (money)", conjugations: ["gasto", "gastas", "gasta", "gastamos", "gastáis", "gastan"] } // REPLACED 'ocurrir'
                ],
                "General Use Verbs 2": [
                    { spanish: "existir", english: "to exist", conjugations: ["existo", "existes", "existe", "existimos", "existís", "existen"] },
                    { spanish: "producir", english: "to produce", conjugations: ["produzco", "produces", "produce", "producimos", "producís", "producen"] },
                    { spanish: "ocurrir", english: "to happen", conjugations: ["ocurro", "ocurres", "ocurre", "ocurrimos", "ocurrís", "ocurren"] }, // Kept one 'ocurrir'
                    { spanish: "lograr", english: "to achieve/manage", conjugations: ["logro", "logras", "logra", "logramos", "lográis", "logran"] },
                    { spanish: "descubrir", english: "to discover", conjugations: ["descubro", "descubres", "descubre", "descubrimos", "descubrís", "descubren"] }, // REPLACED a duplicate
                    { spanish: "mantener", english: "to maintain", conjugations: ["mantengo", "mantienes", "mantiene", "mantenemos", "mantenéis", "mantienen"] },
                    { spanish: "permitir", english: "to permit/allow", conjugations: ["permito", "permites", "permite", "permitimos", "permitís", "permiten"] },
                    { spanish: "ofrecer", english: "to offer", conjugations: ["ofrezco", "ofreces", "ofrece", "ofrecemos", "ofrecéis", "ofrecen"] },
                    { spanish: "resultar", english: "to turn out/result", conjugations: ["resulto", "resultas", "resulta", "resultamos", "resultáis", "resultan"] },
                    { spanish: "sugerir", english: "to suggest", conjugations: ["sugiero", "sugieres", "sugiere", "sugerimos", "sugerís", "sugieren"] } // REPLACED 'recordar'
                ]
            };
            
            // **FIX**: Safely combines the base sets into the final object for the dropdown menu.
            const verbSets = {
                ...baseVerbSets,
                "All 100 Verbs": Object.values(baseVerbSets).flat()
            };

            const [currentIndex, setCurrentIndex] = useState(0);
            const [isFlipped, setIsFlipped] = useState(false);
            const [mode, setMode] = useState('spanish-to-english');
            const [selectedSet, setSelectedSet] = useState('Essential Basics');
            const [shuffledVerbs, setShuffledVerbs] = useState(() => shuffle(verbSets['Essential Basics']));
            const [studiedCards, setStudiedCards] = useState(new Set());
            const [touchStart, setTouchStart] = useState(null);
            const [touchEnd, setTouchEnd] = useState(null);

            function shuffle(array) {
                const newArray = [...array];
                for (let i = newArray.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
                }
                return newArray;
            };

            const minSwipeDistance = 50;

            const onTouchStart = (e) => {
                setTouchEnd(null);
                setTouchStart(e.targetTouches[0].clientX);
            };

            const onTouchMove = (e) => setTouchEnd(e.targetTouches[0].clientX);

            const onTouchEnd = () => {
                if (!touchStart || !touchEnd) return;
                const distance = touchStart - touchEnd;
                const isLeftSwipe = distance > minSwipeDistance;
                const isRightSwipe = distance < -minSwipeDistance;

                if (isLeftSwipe) handleNext();
                if (isRightSwipe) handlePrevious();
            };
            
            const handleFlip = () => {
                setIsFlipped(prevFlipped => {
                    if (!prevFlipped) {
                        setStudiedCards(prev => new Set(prev).add(currentIndex));
                    }
                    return !prevFlipped;
                });
            };

            const handleCardClick = (e) => {
                if (touchStart && touchEnd) {
                    const distance = Math.abs(touchStart - touchEnd);
                    if (distance < minSwipeDistance) {
                        handleFlip();
                    }
                } else {
                    handleFlip();
                }
            };

            const handleKeyPress = (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    handleFlip();
                }
            };
            
            const handleShuffle = () => {
                const currentSet = verbSets[selectedSet];
                setShuffledVerbs(shuffle(currentSet));
                setCurrentIndex(0);
                setIsFlipped(false);
                setStudiedCards(new Set());
            };

            const handleSetChange = (setName) => {
                setSelectedSet(setName);
                const newSet = verbSets[setName];
                setShuffledVerbs(shuffle(newSet));
                setCurrentIndex(0);
                setIsFlipped(false);
                setStudiedCards(new Set());
            };

            const handleNext = () => {
                if (currentIndex < shuffledVerbs.length - 1) {
                    setCurrentIndex(currentIndex + 1);
                    setIsFlipped(false);
                }
            };

            const handlePrevious = () => {
                if (currentIndex > 0) {
                    setCurrentIndex(currentIndex - 1);
                    setIsFlipped(false);
                }
            };

            const handleModeToggle = () => {
                setMode(mode === 'spanish-to-english' ? 'english-to-spanish' : 'spanish-to-english');
                setIsFlipped(false);
            };
            
            const resetDeck = () => {
                setCurrentIndex(0);
                setIsFlipped(false);
                setStudiedCards(new Set());
            };

            const currentVerb = shuffledVerbs[currentIndex];
            const totalStudied = studiedCards.size;
            const progress = shuffledVerbs.length > 0 ? ((totalStudied / shuffledVerbs.length) * 100).toFixed(1) : 0;

            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4 flex flex-col">
                    <div className="max-w-md mx-auto w-full">
                        {/* Header */}
                        <header className="text-center mb-6">
                            <div className="flex items-center justify-center gap-2 mb-2">
                                <BookIcon />
                                <h1 className="text-2xl font-bold text-gray-800">Spanish Verbs</h1>
                            </div>
                            <p className="text-sm text-gray-600">Learn essential Spanish verbs by category</p>
                        </header>

                        {/* Set Selector */}
                        <div className="mb-4">
                            <label htmlFor="set-selector" className="block text-sm font-medium text-gray-700 mb-2">
                                Choose a verb set:
                            </label>
                            <select
                                id="set-selector"
                                value={selectedSet}
                                onChange={(e) => handleSetChange(e.target.value)}
                                className="w-full p-3 border border-gray-300 rounded-lg bg-white shadow-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
                            >
                                {Object.keys(verbSets).map((setName) => (
                                    <option key={setName} value={setName}>
                                        {setName}
                                    </option>
                                ))}
                            </select>
                        </div>

                        {/* Progress Bar */}
                        <div className="mb-4">
                            <div className="flex justify-between text-sm text-gray-600 mb-1">
                                <span>Progress</span>
                                <span>{totalStudied}/{shuffledVerbs.length} ({progress}%)</span>
                            </div>
                            <div className="w-full bg-gray-200 rounded-full h-2">
                                <div 
                                    className="bg-indigo-600 h-2 rounded-full transition-all duration-300"
                                    style={{ width: `${progress}%` }}
                                ></div>
                            </div>
                        </div>

                        {/* Controls */}
                        <div className="flex justify-between items-center mb-6">
                            <button
                                onClick={handleModeToggle}
                                className="px-3 py-2 bg-white rounded-lg shadow-sm border text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors"
                            >
                                {mode === 'spanish-to-english' ? 'ES → EN' : 'EN → ES'}
                            </button>
                            
                            <div className="text-sm text-gray-600" aria-live="polite">
                                {currentIndex + 1} / {shuffledVerbs.length}
                            </div>
                            
                            <button
                                onClick={handleShuffle}
                                className="p-2 bg-white rounded-lg shadow-sm border hover:bg-gray-50 transition-colors"
                                aria-label="Shuffle deck"
                            >
                                <ShuffleIcon />
                            </button>
                        </div>

                        {/* Flashcard */}
                        <div 
                            className="relative w-full h-80 mb-6 cursor-pointer perspective-1000"
                            onClick={handleCardClick}
                            onTouchStart={onTouchStart}
                            onTouchMove={onTouchMove}
                            onTouchEnd={onTouchEnd}
                            onKeyPress={handleKeyPress}
                            role="button"
                            tabIndex="0"
                            aria-label={`Flashcard: ${isFlipped && currentVerb ? currentVerb.english : (currentVerb ? currentVerb.spanish : '')}. Tap to flip.`}
                        >
                            {currentVerb && (
                                <div className={`absolute inset-0 w-full h-full transition-transform duration-500 transform-style-preserve-3d ${isFlipped ? 'rotate-y-180' : ''}`}>
                                    {/* Front of card */}
                                    <div className="absolute inset-0 w-full h-full bg-white rounded-xl shadow-lg border-2 border-indigo-100 backface-hidden flex flex-col items-center justify-center p-4">
                                        <div className="text-xs uppercase tracking-wide text-gray-500 mb-2">
                                            {mode === 'spanish-to-english' ? 'Español' : 'English'}
                                        </div>
                                        <div className="text-3xl font-bold text-gray-800 text-center mb-3">
                                            {mode === 'spanish-to-english' ? currentVerb.spanish : currentVerb.english}
                                        </div>
                                        <div className="absolute bottom-4 text-xs text-gray-400">Tap or swipe</div>
                                    </div>
                                    
                                    {/* Back of card */}
                                    <div className="absolute inset-0 w-full h-full bg-indigo-50 rounded-xl shadow-lg border-2 border-indigo-200 backface-hidden rotate-y-180 flex flex-col items-center justify-center p-4">
                                        <div className="text-xs uppercase tracking-wide text-indigo-600 mb-2">
                                            {mode === 'spanish-to-english' ? 'English' : 'Español'}
                                        </div>
                                        <div className="text-3xl font-bold text-indigo-800 text-center mb-4">
                                            {mode === 'spanish-to-english' ? currentVerb.english : currentVerb.spanish}
                                        </div>
                                        
                                        <div className="w-full max-w-xs">
                                            <div className="text-xs text-indigo-600 text-center mb-2">Present Tense Conjugations</div>
                                            <div className="grid grid-cols-2 gap-x-4 gap-y-1 text-sm">
                                                {[ "yo", "tú", "él/ella", "nosotros", "vosotros", "ellos/ellas" ].map((pronoun, i) => (
                                                    <React.Fragment key={pronoun}>
                                                        <div className="text-right text-indigo-700">{pronoun}</div>
                                                        <div className="font-medium text-indigo-900">{currentVerb.conjugations[i]}</div>
                                                    </React.Fragment>
                                                ))}
                                            </div>
                                        </div>
                                        <div className="absolute bottom-4 text-xs text-indigo-400">Tap or swipe</div>
                                    </div>
                                </div>
                            )}
                        </div>

                        {/* Navigation */}
                        <div className="flex justify-between items-center mb-4">
                            <button
                                onClick={handlePrevious}
                                disabled={currentIndex === 0}
                                className="flex items-center gap-2 px-4 py-2 bg-white rounded-lg shadow-sm border disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors"
                            >
                                <ChevronLeftIcon />
                                Previous
                            </button>
                            
                            <button
                                onClick={resetDeck}
                                className="p-2 bg-white rounded-lg shadow-sm border hover:bg-gray-50 transition-colors"
                                title="Reset to beginning"
                                aria-label="Reset deck to beginning"
                            >
                                <RefreshIcon />
                            </button>
                            
                            <button
                                onClick={handleNext}
                                disabled={!shuffledVerbs || currentIndex === shuffledVerbs.length - 1}
                                className="flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg shadow-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-indigo-700 transition-colors"
                            >
                                Next
                                <ChevronRightIcon />
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(SpanishVerbFlashcards));
    </script>
</body>
</html>
